@model NewsEngine2A.Models.News.Article
<div class="card shadow mb-4">
    <div class="card-header py-3 d-flex justify-content-between">
        <h6 class="m-0 font-weight-bold text-primary">Edit an article</h6>
    </div>
    <div class="card-body">
        @{
            Html.BeginForm("Edit", "Article", FormMethod.Post, new { enctype = "multipart/form-data" });

            @Html.HttpMethodOverride(HttpVerbs.Put)
            @Html.AntiForgeryToken();

            @Html.Label("Title", "Article Title");
            @Html.TextBox("Title", null, new { @class = "form-control" });
            @Html.ValidationMessageFor(m => m.Title, "Title is mandatory", new { @class = "text-danger " });
            <br />
            @Html.Label("Headline", "Article Headline");
            @Html.TextBox("Headline", null, new { @class = "form-control" });
            @Html.ValidationMessageFor(m => m.Headline, "Headline is mandatory", new { @class = "text-danger " });
            <br />
            @Html.Label("Content", "Article Content");
            @Html.TextArea("Content", null, new { @class = "form-control" });
            @Html.ValidationMessageFor(m => m.Title, "Content is mandatory", new { @class = "text-danger " });
            <br />
            @Html.Label("Thumbnail", "Thumbnail Image");
            <img id="preview" src="@Model.PictureUrl" style="max-width:400px;" />
            <input type="file" onchange="showImage(this)" name="upload" />
            @Html.ValidationMessageFor(m => m.Title, "Image is mandatory", new { @class = "text-danger " });
            <br />
            @Html.Label("Category", "Article Category");
            <br />
            @Html.DropDownListFor(c => c.NewsCategoryId, new SelectList(@ViewBag.categories, "Value", "Text"),
     "Please select a category", new { @class = "form-control" });
            @Html.ValidationMessageFor(m => m.Title, "Category is mandatory", new { @class = "text-danger " });
            <br />
            <button class="btn btn-success" type="submit">Edit Article</button>

            @Html.Hidden("EditDate", DateTime.Now);

            Html.EndForm();
        }
    </div>
</div>

<script>
    function showImage(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $("#preview").attr("src", e.target.result);
            }

            reader.readAsDataURL(input.files[0]);
        }
    }
</script>